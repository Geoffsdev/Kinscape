<template>
  <div class="story-avatar">
    <div class="story-avatar__image">
      <div
        v-if="!isCustomAvatar"
        class="story-avatar__icon"
      >
        <svg width="77" height="95" viewBox="0 0 77 95" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.2493 21.5501C15.2493 20.407 15.6509 19.3108 16.3659 18.5025C17.0808 17.6942 18.0505 17.2401 19.0616 17.2401H57.1854C58.1965 17.2401 59.1661 17.6942 59.8811 18.5025C60.5961 19.3108 60.9977 20.407 60.9977 21.5501C60.9977 22.6932 60.5961 23.7895 59.8811 24.5978C59.1661 25.4061 58.1965 25.8602 57.1854 25.8602H19.0616C18.0505 25.8602 17.0808 25.4061 16.3659 24.5978C15.6509 23.7895 15.2493 22.6932 15.2493 21.5501Z" fill="#D0D0D0"/>
          <path d="M15.2493 38.7902C15.2493 37.6472 15.6509 36.5509 16.3659 35.7426C17.0808 34.9343 18.0505 34.4802 19.0616 34.4802H57.1854C58.1965 34.4802 59.1661 34.9343 59.8811 35.7426C60.5961 36.5509 60.9977 37.6472 60.9977 38.7902C60.9977 39.9333 60.5961 41.0296 59.8811 41.8379C59.1661 42.6462 58.1965 43.1003 57.1854 43.1003H19.0616C18.0505 43.1003 17.0808 42.6462 16.3659 41.8379C15.6509 41.0296 15.2493 39.9333 15.2493 38.7902Z" fill="#D0D0D0"/>
          <path d="M19.0616 51.7202C18.0505 51.7202 17.0808 52.1743 16.3659 52.9826C15.6509 53.7909 15.2493 54.8871 15.2493 56.0302C15.2493 57.1733 15.6509 58.2696 16.3659 59.0779C17.0808 59.8862 18.0505 60.3403 19.0616 60.3403H57.1854C58.1965 60.3403 59.1661 59.8862 59.8811 59.0779C60.5961 58.2696 60.9977 57.1733 60.9977 56.0302C60.9977 54.8871 60.5961 53.7909 59.8811 52.9826C59.1661 52.1743 58.1965 51.7202 57.1854 51.7202H19.0616Z" fill="#D0D0D0"/>
          <path d="M15.2493 73.2704C15.2493 72.1273 15.6509 71.031 16.3659 70.2227C17.0808 69.4144 18.0505 68.9603 19.0616 68.9603H34.3111C35.3222 68.9603 36.2919 69.4144 37.0069 70.2227C37.7218 71.031 38.1235 72.1273 38.1235 73.2704C38.1235 74.4134 37.7218 75.5097 37.0069 76.318C36.2919 77.1263 35.3222 77.5804 34.3111 77.5804H19.0616C18.0505 77.5804 17.0808 77.1263 16.3659 76.318C15.6509 75.5097 15.2493 74.4134 15.2493 73.2704Z" fill="#D0D0D0"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M0 12.9301C0 9.5008 1.20498 6.21199 3.34985 3.78713C5.49473 1.36227 8.4038 0 11.4371 0H64.8103C67.8436 0 70.7527 1.36227 72.8976 3.78713C75.0424 6.21199 76.2474 9.5008 76.2474 12.9301V81.8904C76.2474 85.3197 75.0424 88.6085 72.8976 91.0334C70.7527 93.4583 67.8436 94.8205 64.8103 94.8205H11.4371C8.4038 94.8205 5.49473 93.4583 3.34985 91.0334C1.20498 88.6085 0 85.3197 0 81.8904V12.9301ZM11.4371 8.62005H64.8103C65.8214 8.62005 66.7911 9.07414 67.5061 9.88242C68.221 10.6907 68.6227 11.787 68.6227 12.9301V81.8904C68.6227 83.0335 68.221 84.1298 67.5061 84.9381C66.7911 85.7464 65.8214 86.2005 64.8103 86.2005H11.4371C10.426 86.2005 9.45632 85.7464 8.74136 84.9381C8.0264 84.1298 7.62474 83.0335 7.62474 81.8904V12.9301C7.62474 11.787 8.0264 10.6907 8.74136 9.88242C9.45632 9.07414 10.426 8.62005 11.4371 8.62005Z" fill="#D0D0D0"/>
        </svg>
      </div>
      <v-img
        v-else
        :src="cover"
        height="208px"
      >
        <template v-slot:placeholder>
          <v-progress-circular
              class="story-avatar__loader"
              indeterminate
              color="medium_grey"
          />
        </template>
      </v-img>
    </div>
  </div>
</template>

<script>
import {mapState} from 'vuex'

export default {
  computed: {
    ...mapState({
      cover: store => store.stories.story.content.cover
    }),
    isCustomAvatar() {
      return this.cover && this.cover.includes('/active_storage/')
    }
  }
}
</script>

<style lang="scss">
.story-avatar {
  background: $color-dark-white;
  border-radius: 5px;
  overflow: hidden;
  max-width: 208px;
  min-height: 208px;
  width: 100%;
  &__image {
    position: relative;
    height: 208px;
    display: flex;
    justify-content: center;
    align-content: center;
  }
  &__loader {
    margin: auto;
    height: 100% !important;
    display: flex;
  }
  &__icon {
    margin: auto;
    display: flex;
  }
}
</style>
